CHANGE LOG:  IceWM Control Panel

NOTE:  This is a partial ChangeLog containing the 
latest changes in this release only.  For a FULL  history 
of changes through all versions, visit:

http://icesoundmanager.sourceforge.net/changelog.php
______________________________________________
______________________________________________


VERSION 3.1 - 12/19/2003 - 12/24/2003

The focus of this release is bug fixes, installation improvements, and 
internationalization improvements.


SUMMARY OF CHANGES:
	A partial French translation has been added. [Big thanks to Yves Perraudin 
	(yploglib ['at'] free.fr)].  A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5. Major 
	bugs in the PangoXLFD module which could lead to complete application 
	crashes have been fixed.  Major features have been added to IceMe, and 
	a serious bug has been fixed.  Several bugs have been fixed within other 
	applications, including a bug associated with the launching of external 
	processes.


PangoXLFD        (pangoxlfd.py):
	- Major bug fix: Fixed application crashes due to font 'fallback' errors when an invalid font was supplied by ensuring that all font sizes are greater 0 and less than 101; applications like IcePref2 and IcePref2-TD should no longer crash upon selecting a new font if the current font in the text entry is invalid
	- Fixed possible crash or application freeze if a ridiculously large font was loaded by restricting the maximum font size to 100pts
	- Improved font conversions between Pango descriptions and XLFD strings
	- Added Pango font description validation method 'get_valid_pango_font_desc' which will return a default fallback font description string of "Arial 10" if the suggested Pango font description appears to be invalid; fixes several possible application crashes in IcePref2 and IcePref2-TD


IceWMCP-Common        (icewmcp_common.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr)
	for the software update checker; status: complete
	- Added font and charset settings for the French language
	- Bug Fix: Added common variable 'BASH_SHELL_EXEC' and Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and external applications failing to launch properly if the user was not using Bash as their default shell; added common method 'fork_process' to use common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003; this method is now used by most applications when they need to fork a process to help ensure that the process is launched properly using a Bash shell
	- Bug Fix: Added error-catching and checking that 'ICEWMCP_LAST_FILE' != None in the method  'SELECT_A_FILE' to fix BUG NUMBER: 6441772, Reported by: Anonymous User, At: Tue Sep 30 20:40:01 2003, regarding the File Selection dialog not showing if the value of ICEWMCP_LAST_FILE==None; the bug had been spotted when the user tried to open a menu file in IceMe
	- Code cleanup and Internationalization improvement: method 'getLocaleDir' has been rewritten to be cleaner and now probes environment variables 'LOCALE', 'LC_ALL' and 'LC_MESSAGES' for language settings.  This should aid some systems in the proper loading of locale-specific help files and control panel applets.   Environment variables are now probed in the following order: 'LANG', 'LANGUAGE', 'LC_ALL', 'LOCALE', 'LC_MESSAGES'
	- Minor GUI improvements added to the 'SELECT_A_FILE' file selection dialog: tooltips and gtk stock icons added to the OK and Cancel buttons


IceWMCP         (IceWMCP.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: pretty complete
	- Bug Fix: Changed launching of control panel applets to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets failing to launch properly if the user was not using Bash as their default shell; all applets are now forced to be launched with the needed Bash/sh shell even if the user is using some other shell.



IceWMCP-EnergyStar         (IceWMCPEnergyStar.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: complete
	- A Help file in Spanish is now available (English version already exists)


IceSoundManager        (icesound.py):
	- Version is now 3.1
	- Major bug fix for stand-alone installation packages: A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5.
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: about 75% complete
	- GUI Fix: The textbox for the Installation/Setup window now uses set_wrap_mode(WRAP_WORD) to eliminate the ugly letter-by-letter line wraps
	- More user interface improvements: improved spacing between the 'Start IceSound Server' and 'Stop IceSound Server' buttons when the window is resized or maximized, and improved general look of the window when it is resized. The sound theme selection window is now larger, to take advantage of the unused spaced that was available.
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves starting/stopping of the IceSound server when applying sound themes or simply enabling/disabling the server; This also improves server 'refreshing' when changing sounds in the theme and improves launching of external .wav sound editors. This also improves stopping of sounds currently playing when played from within IceSoundManager using the external .wav sound player.
	- Miscellaneous code cleanups


IcePref2       (icepref.py):
	- Version is now 3.3
	- Major bug fix for stand-alone installation packages: A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5.
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: about 50% complete
	- Major font loading bug fix: Major bugs in the PangoXLFD module which could lead to complete application crashes have been fixed; Pango font description validation method 'get_valid_pango_font_desc' from module pangoxlfd.py is now called when selecting a font to ensure safer fallbacks if necessary instead of complete application crashes
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves the launching of external applications such as IceMe, IcePref2, IceWMCP, and IceSoundManager; also, it improves the restarting of IceWM and icewmbg
	- Bug fix: Fixed a bug where correct colors samples were not always shown when default values were reset, a new preferences file was loaded, or "Run As Root" was toggled unless the color selection dialog was opened for each color; added overridden method 'set_value' to the IceColor widget class.
	- Bug Fix / Correction: Mis-labeled property 'ColorActiveWorkspaceButtonText' in the 'Workspace' category  has had its description changed from 'Color of inactive workspace button text' to 'Color of active workspace button text' .  (Translators: Please update your language catalogs!)  The Spanish and French translation catalogs have already been updated accordingly.
	- Fixed: all 'icepref-*' shell startup scripts now force the use of the needed /bin/bash shell


IcePref2-TD            (icepref_td.py):
	- Version is now 3.1
	- Major bug fix for stand-alone installation packages: A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5.
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: about 50% complete
	- Major font loading bug fix: Major bugs in the PangoXLFD module which could lead to complete application crashes have been fixed; Pango font description validation method 'get_valid_pango_font_desc' from module pangoxlfd.py is now called when selecting a font to ensure safer fallbacks if necessary instead of complete application crashes
	- Added support for the 'menusel.xpm' image under the category "Menus"
	- Added support for the 'icewm.xpm' image under the category "Taskbar"  (either icewm.xpm or linux.xpm can now be used as the taskbar's 'Start' button pixmap)
	- Bug fix: Fixed a bug where correct colors samples were not shown when a new theme was opened unless the color selection dialog was opened for each color; added overridden method 'set_value' to the IceColor widget class.
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves the launching of external applications such as IceMe, IcePref2, IceWMCP, IceSoundManager, and Gimp (for editing images); also, it improves the restarting of IceWM
	- Bug Fix / Correction: Mis-labeled property 'ColorActiveWorkspaceButtonText' in the 'Workspace' category  has had its description changed from 'Color of inactive workspace button text' to 'Color of active workspace button text' .  (Translators: Please update your language catalogs!)  The Spanish and French translation catalogs have already been updated accordingly.
	The default list of Gradients now includes the following pixmaps: "menubg.xpm menusel.xpm switchbg.xpm taskbarbg.xpm dialogbg.xpm taskbuttonbg.xpm tasbuttonactive.xpm taskbuttonminimized.xpm toolbuttonbg.xpm workspacebuttonbg.xpm workspacebuttonactive.xpm"  (since most people will need these pixmaps to 'stretch' gradiently rather than 'tile'); this should aid in the development of smoother looking themes for most people.


PhrozenClock  (phrozenclock.py):
	- Version is now 3.1
	- Major bug fix for stand-alone installation packages: A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5.
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: about 98% complete
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves setting the clock and time zone using forked 'date' processes and improves restarting IceWM when necessary to apply time zone changes.


IceWMCP-Wallpaper    (IceWMCPWallpaper.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: about 99% complete
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves the launching of Gimp for editing images and improves the restarting of icewmbg (and IceWM if necessary) for setting the changed background.


IceWMCP-WinOptions          (IceWMCPWinOptions.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: complete
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves the restarting of IceWM for updating window options.


IceWMCP-Mouse        (IceWMCPMouse.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: partially complete (IcePref2 translations needed)
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves setting of the mouse cursor speed using forked 'xset' processes, and improves restarting of IceWM when necessary to apply mouse cursor changes and mouse behavior setting changes.


IceWMCP-Keyboard        (IceWMCPKeyboard.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: partially complete (IcePref2 translations needed)
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves setting of the keyboard beep and repetition using forked 'xset' processes, and improves restarting of IceWM when necessary to apply shortcut key settings.


IceMe  (IceMe.py):
	- Version is now 3.1
	- A French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: 98% complete  (2 new translation strings for Gnome menus needed)
	- Major Feature Enhancement: Added support for Gnome-1 and Gnome-2 menus using the 'icewm-menu-gnome1' and 'icewm-menu-gnome2' menu embedding apps that come with IceWM. 	(Fixes Bug Report/Feature Request #488846, Received from: klaumikli ['at'] gmx.de, at: Fri Oct 17 14:46:01 2003, regarding IceMe mishandling embedded Gnome menus in the IceWM menu file)  Level of support: proper parsing of 'menuprog' menu items using embedded Gnome menus when menu files are loaded, proper saving of embedded Gnome menus, ability to insert new Gnome-1 and Gnome-2 menus; cutting, copying, pasting, and moving of embedded Gnome menus is also supported;  2 new Gnome icons added to the toolbar to support this features.  NOTE: You may edit the command line that triggers the embedded Gnome menu, but this does NOT mean IceMe gives you the ability to edit Gnome menus  (IceMe isn't a Gnome app!  Use gmenu or a similar app to edit the Gnome menu entries)
	- Major Feature Enhancement:  IceMe can now handle editing the BEHAVIOR of the IceWM menu - an embedded IcePref2 'menu' tab has been added to the interface; the first tab is, of course, the menu editor for adding/changing/removing menu entries; the 2nd tab allows you to manage such menu behavior as fonts, colors, auto-reloading of menu files, and what stuff built-in to IceWM will be shown on your IceWM menu.  The new interface is a 'Notebook' with 2 tabs.  I should have done this a while back, since it only make sense to be able to edit both the menu and the menu's behavior in the same application.  (The ability to launch the full version of IcePref2 still remains on the menu of course.)
	- Major Feature Enhancement: Total re-write and improvement of the "Open IceWM Menu File" logic and functionality; before, selecting a menu file would only open a file named 'menu' in the directory selected;  The old file selection dialog has been replaced with a new dialog that allows you to truly select any combination of 'menu', 'programs', and 'toolbar' files you have access to on your file system, allowing for endless possibilities in terms of creating sets of menu configuration files.  You can also even name non-existent files in the dialog for the purpose of creating new menu, programs, and toolbar files;  also  IceMe will try to open ANY non-directory file  (for example, you can now open as a menu file a file named 'my_menu-backup'); since IceMe will try to open any file you give it, you should be careful what you feed it (IceMe has great error-catching but dont get ridiculous and start trying to open binaries, etc.);  You should use this feature with care, and not use it at all if you don't know what you are doing.  The following new methods were added to make this new feature possible:  open_menu_selection_dialog, menu_sel_file_box, menu_sel_file_box_cb, menu_selection_dialog_close, menu_selection_dialog_ok, diable_file_overrides;  The ability to toggle 'Run As Root' and non-root is still available and remains the safest way for handling the main configurations.
	- Major Bug Fix:  Fixed problems with cutting/copying/pasting text using ctrl+x/ctrl+c/ctrl+v in text entry fields like the "Icon:" and "Command:" fields.  (The problem was the shortcut keys for cutting/copying/pasting text were being shared with the shortcut keys for cutting/copying/pasting menu items.) ; Cutting/Copying/Pasting text in the text entry fields now works again using the shortcut keys ctrl+x/ctrl+c/ctrl+v, respectively; As a result, the shortcut keys for cutting/copying/pasting menu items have been changed (see below) 
	- Shortcut key changes: The shortcut key for Cutting a menu item is now Shift+Ctrl+X; The shortcut key for Pasting a menu item is now Shift+Ctrl+V; The shortcut key for Copying a menu item is now Shift+Ctrl+C;  These changes were necessary to fix a bug that prevented cutting/copying/pasting of text in text entry fields. 
	- Bug Fix: Changed launching of "IceWM Preferences" (IcePref2) menu item to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.
	- Added new method 'apply_icepref_settings' to be used by the embedded IcePref-2 'menu behavior' tab; method uses common method 'fork_process' to restart IceWM to apply any changes made to the menu behavior
	- Feature Enhancement: Added drag-and-drop support for commands:  Files can now be dragged and dropped onto the "Command:" entry or its icon button to set the command (useful for dragging from file managers)
	- Drag-and-drop bug fixes: eliminated the 'g-warnings' that sometimes showed up on the console when dragging and dropping an icon onto the Icon field or button; dragging-and-dropping is now properly disabled for 'insensitive' menu items such as the menu tree's root and menu separators  ( no dragging of icons or commands onto these, no dragging of commands onto folders, etc.);  this is a safety improvement that prevents the possible creation of a corrupt menu when the user inadvertently drags an icon or command where it doesn't belong.
	- The English and Spanish versions of the Help files have been updated to accommodate the latest changes to the software.
	- Removed unnecessary methods openCustomDir, openCustomDirCB  (they have been replaced with better functionality)
	- 2 new translatable strings added to the gettext translation catalog to support the new Gnome menu features  (Translators: Please update your language translations!) ; Spanish translations have already been added and taken care of.
	- Improved error-catching when opening and reading menu files in the MenuParser.py module
	- MenuParser.py module: 'menuprog' entries in menu files are now treated as 'prog' items appropriately
	- A few corrections to the Spanish translation catalog
	- Major GUI change: now using a 'notebook' interface (see above)
	- Filling a void: The empty space that existed underneath the menu entry editor on the right side now has a small IceWMCP logo in it, so things don't look so barren
	- Various GUI touch-ups


IceWMCP System and Hardware        (IceWMCPSystem.py):
	- Version is now 1.4-beta
	- Major bug fix for stand-alone installation packages: A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5.
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: pretty complete
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.  This improves ejecting of floppy, CD-ROM, SCSI, and tape devices using forked 'eject' processes.


IceWMCP_GtkPCCard     (IceWMCP_GtkPCCard.py):
	- Version is now 1.5
	- Major bug fix for stand-alone installation packages: A major installation bug has been fixed by 
	upgrading the installer from PyInstallShield 0.4 to PyInstallShield 0.5.
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: complete


IceWMCPRun  (IceWMCPRun.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: complete
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.


IceWMCP-GtkIconSelection       (IceWMCPGtkIconSelection.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: pretty complete



IceWMCP-BugReport        (IceWMCP_BugReport.py):
	- Version is now 3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: complete
	- The bug reporter now also collects info on the following environment variables useful for trouble shooting bug reports: 'LOCALE', 'SHELL', 'TERM', 'CPU'
	The bug reporter now also collects info on the current working directory from which the application is being run, using os.getcwd()


PySpool  (pyspool.py, pyprintcommon.py):
	- Version is now 0.3.1
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: pretty complete
	- Code cleanup: Removed unused method 'runPyPrint'
	- Bug Fix: Changed launching of external applications to use common method 'fork_process' from icewmcp_common and common variable 'BASH_SHELL_EXEC' to implement Bash shell location probing to fix BUG NUMBER 1523884 reported by david ['-at-'] jetnet.co.uk on Fri Oct 31 23:47:12 2003 about applets and applications failing to launch if the user was not using Bash as their shell.


IceWMCP_Dialogs  (IceWMCP_Dialogs.py):
	- No changes

icepref_search.py:
	- A (partial) French translation has been added by Yves Perraudin (yploglib ['at'] free.fr);
	status: not complete or really started


The Installer (PyInstallShield):
	- Upgraded the installer from PyInstallShield 0.4 to PyInstallShield 0.5, which includes the following changes:
		- Version is now 0.5
		- Added a 'coding' comment to the second line of the source to help 
		fix deprecation 'no encoding specified' warnings  (This is needed now
		that Spanish translations are stored internally)
		- Removed unnecessary call to 'import GTK' which stopped the 
		install process from starting on many systems; this is a MAJOR Bug Fix
		- Set the wrap_mode for the event logger text area at the bottom of 
		the screen to WRAP_WORD, instead of '1'
		- Safety improvement: added a list of 'sacred directories' on Linux that 
		will never be deleted during un-installation under any circumstances
		- Improved un-installation by using os.removedirs() to help insure 
		complete recursive deletion of directories; fixes a bug where empty 
		directories were sometimes left on the system
		- Important: Scripts INSTALL-ME.sh and UNINSTALL-ME.sh, and all startup scripts 
		created on Linux for installed executables now force the use of Bash as 
		the shell by referencing '#! /bin/bash' on the first line of all scripts.  
		Developers using PyInstallShield should make an necessary adjustments 
		if they rely on the presense of other shells.



TODO     (My personal reminders - pay no attention to the woman behind the curtain):  
	- See if we can get help from other users to finish the French translation Yves Perraudin started; also, can we get somebody to do a set of French applets and Help files?
	- It seems Petteri abandoned the Finnish translations...he did IceMe only and quit - would anybody like to complete the rest? (I know, wishful thinking)
	- PhrozenClock:  Find a way to read and understand /etc/localtime even if its a 'hard file' instead of a symlink: This means we have to learn to read glibc's binary format for zoneinfo data, if possible  (8.25.2003 - still needs to be researched)
	- PhrozenClock:  Is there a need to support multiple 'localtime' and 'timezone' file locations for PhrozenClock? Do some systems use more than one location for these files and need them 'synched'?  (8.25.2003 - still needs to be researched)
	- New control panel applet under consideration:  Some type of 'font manager' or third-party font tool???  ...maybe hard to implement 'uniform' font installation under X, but at least an applet for viewing installed fonts??
- 	IceWM change log to monitor: (changelog on CVS server:  http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/icewm/icewm-1.2/CHANGES?rev=HEAD&content-type=text/plain)

